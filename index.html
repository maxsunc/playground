<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Upgrade Panel Demo</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    /* Palette */
    --bg1:#1A1A1A; --bg2:#222222;
    --border-common:#999999;
    --border-rare:#4A90E2;
    --border-epic:#9B59B6;
    --border-legend:#F1C40F;
    --text-primary:#FFFFFF;
    --text-secondary:#CCCCCC;
    --panel-glow: 0 0 40px rgba(241,196,15,0.08);

    /* Sizing */
    --card-w: 300px;
    --card-h: 400px;
    --radius: 16px;
    --shadow-soft: 0 10px 30px rgba(0,0,0,.35);
    --transition: .2s cubic-bezier(.2,.8,.2,1);
  }

  html,body{
    height:100%;
    margin:0;
    background: radial-gradient(1200px 800px at 20% 10%, #0c0c0c 0%, #000 55%) fixed;
    color:var(--text-primary);
    font-family: Roboto, system-ui, -apple-system, Segoe UI, Helvetica, Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji";
    overflow:hidden;
  }

  /* Fake game scene underlay */
  .game-bg{
    position:fixed; inset:0;
    background:
      url('https://images.unsplash.com/photo-1544551763-7ef4200b30ee?q=80&w=1920&auto=format&fit=crop') center/cover no-repeat;
    filter: saturate(0.8) brightness(0.5);
    transform: scale(1.05);
  }

  /* Dim + blur for focus */
  .scrim{
    position:fixed; inset:0;
    background: rgba(0,0,0,.6);
    backdrop-filter: blur(6px);
  }

  /* Panel */
  .panel{
    position:fixed; inset:0;
    display:grid; place-items:center;
    padding: 24px;
  }

  .panel__inner{
    width:min(1200px, 96vw);
    background: linear-gradient(160deg, var(--bg1), var(--bg2));
    border-radius: var(--radius);
    box-shadow: var(--panel-glow), var(--shadow-soft);
    border: 1px solid rgba(255,255,255,.06);
    padding: 28px 28px 20px;
  }

  .panel__title{
    font-family: "Cinzel Decorative", serif;
    font-weight:700;
    letter-spacing:.12em;
    text-align:center;
    margin: 6px 0 18px;
    text-transform: uppercase;
    position: relative;
  }
  .panel__title::before,
  .panel__title::after{
    content:"";
    position:absolute; top:50%; width:18%;
    height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.25));
    transform: translateY(-50%);
  }
  .panel__title::before{ left:0; }
  .panel__title::after{ right:0; transform:translateY(-50%) scaleX(-1); }

  .panel__subtitle{
    text-align:center;
    color:var(--text-secondary);
    margin-top: 10px;
    font-size:.95rem;
  }

  /* Cards layout: responsive row->grid */
  .cards{
    display:grid;
    gap: 18px;
    justify-content:center;
  }
  /* Auto-fit columns around the target width */
  .cards{
    grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--card-w)), 1fr));
  }

  /* Card */
  .card{
    height: var(--card-h);
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
    border-radius: calc(var(--radius) + 2px);
    padding: 16px 16px 14px;
    border: 2px solid var(--border-common);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.4);
    position: relative;
    overflow:hidden;
    transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
    cursor:pointer;
    display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
    isolation:isolate;
  }
  .card:hover{ transform: translateY(-4px) scale(1.03); }
  .card:focus-visible{ outline: 3px solid rgba(241,196,15,.6); outline-offset: 2px; }

  /* Rarity borders + glows */
  .card.common{   border-color: var(--border-common);   box-shadow: 0 0 24px rgba(153,153,153,.12); }
  .card.rare{     border-color: var(--border-rare);     box-shadow: 0 0 26px rgba(74,144,226,.18); }
  .card.epic{     border-color: var(--border-epic);     box-shadow: 0 0 26px rgba(155,89,182,.22); }
  .card.legendary{border-color: var(--border-legend);   box-shadow: 0 0 32px rgba(241,196,15,.24); }

  /* Pulse on hover/selected */
  @keyframes glowPulse {
    0%,100%{ box-shadow: 0 0 0 rgba(0,0,0,0); }
    50%{ box-shadow: 0 0 24px currentColor; }
  }
  .card:hover::after,
  .card.selected::after{
    content:"";
    position:absolute; inset:-2px;
    border-radius: inherit;
    box-shadow: 0 0 22px currentColor;
    opacity:.55; pointer-events:none;
    animation: glowPulse 1.6s ease-in-out infinite;
  }

  /* Icon */
  .card__icon{
    width:96px; height:96px;
    border-radius: 18px;
    background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.25), rgba(255,255,255,.06) 55%, rgba(0,0,0,.35) 65%);
    display:grid; place-items:center;
    margin-top: 10px;
    position: relative;
    overflow:hidden;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 6px 18px rgba(0,0,0,.45);
  }

  /* Icon shine sweep */
  .card__icon::after{
    content:"";
    position:absolute; top:-120%; left:-120%;
    width: 240%; height: 240%;
    background: linear-gradient(60deg, rgba(255,255,255,0) 40%, rgba(255,255,255,.25) 50%, rgba(255,255,255,0) 60%);
    transform: rotate(15deg);
    animation: iconShine 3.2s ease-in-out infinite;
  }
  @keyframes iconShine{
    0%, 60% { transform: translate(-35%, -35%) rotate(15deg); opacity: .0; }
    70% { opacity:.9; }
    100%{ transform: translate(15%, 15%) rotate(15deg); opacity:0; }
  }

  .card__icon > span{
    font-size: 52px; line-height:1;
    filter: drop-shadow(0 2px 0 rgba(0,0,0,.5));
  }

  .card__name{
    font-family: "Cinzel Decorative", serif;
    font-weight:700;
    font-size: 1.15rem;
    text-align:center;
    margin: 14px 8px 6px;
    letter-spacing:.04em;
  }
  .card__desc{
    text-align:center;
    color:var(--text-secondary);
    font-size:.95rem;
    margin: 0 8px 10px;
    max-width: 26ch;
  }
  .card__stats{
    margin-top: auto;
    width:100%;
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
    border-radius: 12px;
    padding: 10px 12px;
    font-weight:700;
    text-align:center;
  }

  /* Bottom hint row */
  .panel__hint{
    margin-top: 14px;
    text-align:center;
    color:var(--text-secondary);
    font-size: .95rem;
    opacity:.9;
  }
  kbd{
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.15);
    border-bottom-width:2px;
    border-radius: 6px;
    padding: .1rem .45rem;
    margin: 0 .1rem;
    display:inline-block;
  }

  /* Selected flash */
  @keyframes selectBlast {
    from { transform: scale(1);    filter: brightness(1); }
    50%  { transform: scale(1.05); filter: brightness(1.5); }
    to   { transform: scale(1);    filter: brightness(1); }
  }
  .card.selected { animation: selectBlast .34s ease; }

  /* Rarity accent color applied via currentColor */
  .card.common   { color: var(--border-common); }
  .card.rare     { color: var(--border-rare); }
  .card.epic     { color: var(--border-epic); }
  .card.legendary{ color: var(--border-legend); }

  /* Responsive tweaks */
  @media (max-width: 1200px){
    :root{ --card-w: 260px; --card-h: 360px; }
  }
  @media (max-width: 820px){
    :root{ --card-w: 220px; --card-h: 320px; }
    .panel__title::before, .panel__title::after{ width:12%; }
  }
  @media (max-width: 560px){
    :root{ --card-w: 200px; --card-h: 300px; }
    .panel__inner{ padding:20px; }
  }
</style>
</head>
<body>

<div class="game-bg" aria-hidden="true"></div>
<div class="scrim" aria-hidden="true"></div>

<div class="panel" role="dialog" aria-modal="true" aria-labelledby="title">
  <div class="panel__inner">
    <h1 class="panel__title" id="title">✦ CHOOSE YOUR UPGRADE ✦</h1>

    <div class="cards" id="cards" aria-describedby="hint">
      <!-- Cards populated by JS so we can easily scale 3–6 options -->
    </div>

    <div class="panel__hint" id="hint">
      Press
      <span id="hotkeys"></span>
      to select
    </div>

    <div class="panel__subtitle" id="tip">Tip: Upgrades can be rerolled at shops. Legendary effects persist between floors.</div>
  </div>
</div>

<script>
/** Demo data (swap with real game data) */
const upgrades = [
  { rarity:'rare',      icon:'🪄', name:'Arcane Surge', desc:'Channel unstable magic to empower your next cast.', stat:'+15% Damage for 6s' },
  { rarity:'epic',      icon:'🔥', name:'Hellflame Core', desc:'Ignites enemies on hit for stacking burn.', stat:'+12 DPS burn x 4s' },
  { rarity:'common',    icon:'🛡️', name:'Warding Glyph', desc:'Summon a short-lived shield on dash.', stat:'Absorb 45 damage' },
  { rarity:'legendary', icon:'⚡', name:'Storm Sigil', desc:'Critical hits chain lightning to nearby foes.', stat:'Chains to 3 targets' },
  // Add up to 6 to test scaling:
  // { rarity:'rare',   icon:'❄️', name:'Frostbite', desc:'Chilled foes take bonus crit damage.', stat:'+20% Crit vs Chilled' },
  // { rarity:'epic',   icon:'🧪', name:'Catalyst', desc:'Orbs explode on expiration.', stat:'+90 AoE radius' },
];

/** Build cards */
const cardsEl = document.getElementById('cards');
const hotkeysEl = document.getElementById('hotkeys');

function buildCards(data){
  cardsEl.innerHTML = '';
  data.forEach((u, i) => {
    const idx = i + 1;
    const card = document.createElement('button');
    card.className = `card ${u.rarity}`;
    card.setAttribute('data-index', idx);
    card.setAttribute('aria-label', `${u.name}, ${u.rarity} rarity`);
    card.innerHTML = `
      <div class="card__icon" aria-hidden="true"><span>${u.icon}</span></div>
      <div class="card__name">${u.name}</div>
      <div class="card__desc">${u.desc}</div>
      <div class="card__stats">${u.stat}</div>
    `;
    card.addEventListener('click', () => selectCard(idx));
    cardsEl.appendChild(card);
  });

  // Hotkeys label
  const keys = data.map((_, i) => `<kbd>${i+1}</kbd>`).join(' ');
  hotkeysEl.innerHTML = keys;
}
buildCards(upgrades);

/** Selection handling (click or 1–6 keys) */
function selectCard(index){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  const picked = document.querySelector(`.card[data-index="${index}"]`);
  if(!picked) return;
  picked.classList.add('selected');

  // Fake confirm effect + update tip text
  const name = picked.querySelector('.card__name')?.textContent ?? 'Upgrade';
  const rarity = [...picked.classList].find(c=>['common','rare','epic','legendary'].includes(c)) ?? 'common';
  document.getElementById('tip').textContent =
    `Chosen: ${name} — ${rarity.charAt(0).toUpperCase()+rarity.slice(1)} applied.`;
  // In a real game, close the panel or apply the effect here.
}

window.addEventListener('keydown', (e) => {
  // Allow 1–6 only; ignore if user is typing in an input (not present here but for safety)
  if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) return;
  const n = Number(e.key);
  if (n >= 1 && n <= 6) {
    selectCard(n);
  }
});
// make prototype for magic selector (todo)
</script>

</body>
</html>
